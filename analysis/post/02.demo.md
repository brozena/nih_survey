NIH BD/Finhealth Survey - Descriptive Statistics
================

``` r
install.packages("pacman", repos = "https://cloud.r-project.org")
```

    ## 
    ## The downloaded binary packages are in
    ##  /var/folders/h2/j2rcc6sn4_vcqzgfkx3nnts40000gn/T//RtmpJXyOyS/downloaded_packages

``` r
pacman::p_load("tidyverse", "summarytools", "dplyr", "tidyr", "codified", "forcats", "plyr", "reticulate")
```

## Configure Reticulate for Python use

``` r
library(reticulate)
use_condaenv('reticulate') 
conda_install('reticulate', 'altair')
```

    ## + /opt/homebrew/Caskroom/miniforge/base/bin/conda install --yes --name reticulate -c conda-forge altair

``` r
conda_install('reticulate', 'vl-convert-python')
```

    ## + /opt/homebrew/Caskroom/miniforge/base/bin/conda install --yes --name reticulate -c conda-forge vl-convert-python

``` r
conda_install('reticulate', 'vegafusion')
```

    ## + /opt/homebrew/Caskroom/miniforge/base/bin/conda install --yes --name reticulate -c conda-forge vegafusion

## Load data

``` r
load('data/NIH_survey.Rdata')
```

## Demographics Summary

    ## 
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Variable                           | Stats / Values                 | Freqs (% of Valid) |
    ## +====================================+================================+====================+
    ## | Gender\                            | 1\. Man\                       | 159 (31.9%)\       |
    ## | [character]                        | 2\. Non-binary\                | 33 ( 6.6%)\        |
    ## |                                    | 3\. Prefer not to disclose\    | 3 ( 0.6%)\         |
    ## |                                    | 4\. Prefer to self-describe\   | 5 ( 1.0%)\         |
    ## |                                    | 5\. Woman                      | 299 (59.9%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Age\                               | 1\. 18 to 24\                  | 64 (12.8%)\        |
    ## | [character]                        | 2\. 25 to 34\                  | 186 (37.3%)\       |
    ## |                                    | 3\. 35 to 44\                  | 124 (24.8%)\       |
    ## |                                    | 4\. 45 to 54\                  | 68 (13.6%)\        |
    ## |                                    | 5\. 55 to 64\                  | 38 ( 7.6%)\        |
    ## |                                    | 6\. 65 to 74\                  | 16 ( 3.2%)\        |
    ## |                                    | 7\. 75 or older                | 3 ( 0.6%)          |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Education\                         | 1\. master's degree (MS)\      | 39 ( 7.8%)\        |
    ## | [character]                        | 2\. other\                     | 4 ( 0.8%)\         |
    ## |                                    | 3\. primary school\            | 6 ( 1.2%)\         |
    ## |                                    | 4\. professional or doctorate\ | 6 ( 1.2%)\         |
    ## |                                    | 5\. secondary/high school (or\ | 97 (19.4%)\        |
    ## |                                    | 6\. some university\           | 150 (30.1%)\       |
    ## |                                    | 7\. university graduate (4 ye\ | 136 (27.3%)\       |
    ## |                                    | 8\. vocational/technical scho  | 61 (12.2%)         |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Employment Status\                 | 1\. Employed full time (35 or\ | 206 (41.4%)\       |
    ## | [character]                        | 2\. Employed part time (up to\ | 51 (10.3%)\        |
    ## |                                    | 3\. Homemaker/Stay at home pa\ | 26 ( 5.2%)\        |
    ## |                                    | 4\. Retired\                   | 11 ( 2.2%)\        |
    ## |                                    | 5\. Self-Employed\             | 44 ( 8.9%)\        |
    ## |                                    | 6\. Student and not working\   | 23 ( 4.6%)\        |
    ## |                                    | 7\. Unable to work -- receivi\ | 46 ( 9.3%)\        |
    ## |                                    | 8\. Unable to work -- without\ | 30 ( 6.0%)\        |
    ## |                                    | 9\. Unemployed and currently \ | 51 (10.3%)\        |
    ## |                                    | 10\. Unemployed and not curren | 9 ( 1.8%)          |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Income Level\                      | 1\. 0 to 19 999\               | 204 (40.9%)\       |
    ## | [character]                        | 2\. 100 000 or more\           | 25 ( 5.0%)\        |
    ## |                                    | 3\. 20 000 to 34 999\          | 112 (22.4%)\       |
    ## |                                    | 4\. 35 000 to 69 999\          | 117 (23.4%)\       |
    ## |                                    | 5\. 70 000 to 99 999           | 41 ( 8.2%)         |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Main Financial Goal\               | 1\. To avoid accruing debt\    | 45 ( 9.0%)\        |
    ## | [character]                        | 2\. To build up my savings/em\ | 141 (28.3%)\       |
    ## |                                    | 3\. To pay off debt (student \ | 128 (25.7%)\       |
    ## |                                    | 4\. To reduce impulsive spend\ | 97 (19.4%)\        |
    ## |                                    | 5\. To remember to pay my bil\ | 36 ( 7.2%)\        |
    ## |                                    | 6\. To work towards a large p  | 52 (10.4%)         |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Has used Pay Later Services\       | 1\. I do not know\             | 6 ( 1.2%)\         |
    ## | [character]                        | 2\. No\                        | 186 (37.3%)\       |
    ## |                                    | 3\. Yes                        | 307 (61.5%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Marital Status\                    | 1\. divorced\                  | 43 ( 8.6%)\        |
    ## | [character]                        | 2\. in a relationship, not li\ | 49 ( 9.8%)\        |
    ## |                                    | 3\. living with a partner\     | 94 (18.8%)\        |
    ## |                                    | 4\. married with children\     | 77 (15.4%)\        |
    ## |                                    | 5\. married without children\  | 47 ( 9.4%)\        |
    ## |                                    | 6\. separated\                 | 12 ( 2.4%)\        |
    ## |                                    | 7\. single, never married\     | 172 (34.5%)\       |
    ## |                                    | 8\. widowed                    | 5 ( 1.0%)          |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Ethnicity\                         | 1\. American Indian/Alaska Na\ | 4 ( 0.8%)\         |
    ## | [character]                        | 2\. Asian\                     | 11 ( 2.2%)\        |
    ## |                                    | 3\. Black or African American\ | 44 ( 8.8%)\        |
    ## |                                    | 4\. More than One Race\        | 46 ( 9.2%)\        |
    ## |                                    | 5\. Unknown or Not Reported\   | 12 ( 2.4%)\        |
    ## |                                    | 6\. White                      | 382 (76.6%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Hispanic\                          | 1\. No\                        | 440 (88.2%)\       |
    ## | [character]                        | 2\. Yes                        | 59 (11.8%)         |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Bipolar Subtype\                   | 1\. Bipolar Disorder Not Othe\ | 119 (23.8%)\       |
    ## | [character]                        | 2\. Cyclothymia\               | 9 ( 1.8%)\         |
    ## |                                    | 3\. I do not know\             | 40 ( 8.0%)\        |
    ## |                                    | 4\. Type I\                    | 115 (23.0%)\       |
    ## |                                    | 5\. Type II                    | 216 (43.3%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Age at Diagnosis\                  | 1\. 12-18 years of age\        | 98 (19.7%)\        |
    ## | [character]                        | 2\. 19-29 years old\           | 243 (48.8%)\       |
    ## |                                    | 3\. 30-39 years old\           | 94 (18.9%)\        |
    ## |                                    | 4\. 40-49 years old\           | 30 ( 6.0%)\        |
    ## |                                    | 5\. 50 years old or older\     | 17 ( 3.4%)\        |
    ## |                                    | 6\. under 12 years of age      | 16 ( 3.2%)         |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Prior Hospitalization\             | 1\. No\                        | 230 (46.1%)\       |
    ## | [character]                        | 2\. Not sure\                  | 16 ( 3.2%)\        |
    ## |                                    | 3\. Yes                        | 253 (50.7%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Has Psychiatric Advance Directive\ | 1\. No\                        | 422 (84.6%)\       |
    ## | [character]                        | 2\. Not sure\                  | 37 ( 7.4%)\        |
    ## |                                    | 3\. Yes                        | 40 ( 8.0%)         |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Is Banked\                         | 1\. I do not know\             | 1 ( 0.2%)\         |
    ## | [character]                        | 2\. No\                        | 26 ( 5.3%)\        |
    ## |                                    | 3\. Yes                        | 468 (94.5%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Has Savings Account\               | 1\. I do not know\             | 3 ( 0.6%)\         |
    ## | [character]                        | 2\. No\                        | 135 (27.1%)\       |
    ## |                                    | 3\. Yes                        | 360 (72.3%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Bankruptcy Declared\               | 1\. No\                        | 430 (86.2%)\       |
    ## | [character]                        | 2\. Not sure\                  | 12 ( 2.4%)\        |
    ## |                                    | 3\. Yes                        | 57 (11.4%)         |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Bankruptcy Considered\             | 1\. No\                        | 326 (65.3%)\       |
    ## | [character]                        | 2\. Not sure\                  | 15 ( 3.0%)\        |
    ## |                                    | 3\. Yes                        | 158 (31.7%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Requested Financial Help from Care | 1\. No\                        | 321 (64.6%)\       |
    ## | Partner\                           | 2\. Not sure\                  | 9 ( 1.8%)\         |
    ## | [character]                        | 3\. Yes                        | 167 (33.6%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Ease in Trusting Clinicians\       | 1\. Extremely difficult\       | 35 ( 7.0%)\        |
    ## | [character]                        | 2\. Extremely easy\            | 112 (22.5%)\       |
    ## |                                    | 3\. Neither easy nor difficul\ | 62 (12.4%)\        |
    ## |                                    | 4\. Somewhat difficult\        | 78 (15.7%)\        |
    ## |                                    | 5\. Somewhat easy              | 211 (42.4%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Ease in Trusting Care Partner\     | 1\. Extremely difficult\       | 21 ( 4.2%)\        |
    ## | [character]                        | 2\. Extremely easy\            | 157 (31.5%)\       |
    ## |                                    | 3\. Neither easy nor difficul\ | 88 (17.7%)\        |
    ## |                                    | 4\. Somewhat difficult\        | 52 (10.4%)\        |
    ## |                                    | 5\. Somewhat easy              | 180 (36.1%)        |
    ## +------------------------------------+--------------------------------+--------------------+
    ## | Ease in Trusting Banks\            | 1\. Extremely difficult\       | 200 (40.2%)\       |
    ## | [character]                        | 2\. Extremely easy\            | 17 ( 3.4%)\        |
    ## |                                    | 3\. Neither easy nor difficul\ | 103 (20.7%)\       |
    ## |                                    | 4\. Somewhat difficult\        | 131 (26.3%)\       |
    ## |                                    | 5\. Somewhat easy              | 47 ( 9.4%)         |
    ## +------------------------------------+--------------------------------+--------------------+

## Create descriptive plots

``` python
import pandas as pd
import altair as alt
from altair import datum


wide = r.wide

bar = alt.Chart(wide).mark_bar().encode(
    x=alt.X('count(main_financial_goal)').stack('normalize'),
    y='main_financial_goal'
)

bar.save('plots/descr_main_financial_goal.png', ppi=600)
```
