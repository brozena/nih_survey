---
title: "Pre-registration Materials"
output:
  html_notebook:
    code_folding: show
    df_print: kable
    theme: simplex
    toc: yes
  pdf_document:
    toc: yes
    keep_tex: true
---

# Generate synthetic data

```{r`}
# set seed for reproducibility
set.seed(1234)

# anticipating 500 participants
n.participants <- 500
# each participant gets 27 vignettes
vig.per.p <- 27

# vignette rating/outcome is level of comfort using application
y.cats <- c("(0) completely uncomfortable", "(1)", "(2)", "(3)", "(4)", "(5)", "(6)", "(7)", "(8)", "(9)", "(10) very comfortable") 
y <- round(runif(n.participants * vig.per.p, min=0, max=10)

# total of 27 unique vignettes with 3*3*3 dimensions
all.vignettes <- c("carepartner.spendingpatterns.duringepisode",
                   "carepartner.spendingpatterns.approachingepisode",
                   "carepartner.spendingpatterns.noepisode",
                   "carepartner.planningbudgeting.duringepisode",
                   "carepartner.planningbudgeting.approachingepisode",
                   "carepartner.planningbudgeting.noepisode",
                   "carepartner.restrictspending.duringepisode",
                   "carepartner.restrictspending.approachingepisode",
                   "carepartner.restrictspending.noepisode",
                   "clinician.spendingpatterns.duringepisode",
                   "clinician.spendingpatterns.approachingepisode",
                   "clinician.spendingpatterns.noepisode",
                   "clinician.planningbudgeting.duringepisode",
                   "clinician.planningbudgeting.approachingepisode",
                   "clinician.planningbudgeting.noepisode",
                   "clinician.restrictspending.duringepisode",
                   "clinician.restrictspending.approachingepisode",
                   "clinician.restrictspending.noepisode",
                   "bankscreditors.spendingpatterns.duringepisode",
                   "bankscreditors.spendingpatterns.approachingepisode",
                   "bankscreditors.spendingpatterns.noepisode",
                   "bankscreditors.planningbudgeting.duringepisode",
                   "bankscreditors.planningbudgeting.approachingepisode",
                   "bankscreditors.planningbudgeting.noepisode",
                   "bankscreditors.restrictspending.duringepisode",
                   "bankscreditors.restrictspending.approachingepisode",
                   "bankscreditors.restrictspending.noepisode")

all.vignettes <- rep(all.vignettes, length.out = n.participants * vig.per.p)

# create participant IDs
id <- rep(1:n.participants, each = 27, length.out = n.participants*vig.per.p)

# create dataframe
df <- data.frame(id, y, all.vignettes)

# create variables for dimensions from vignette identifier
df <- separate(df, all.vignettes, into = c("who", "what", "when",), sep=".", remove=FALSE)

# create control variables, constant within participant
age <- factor(rep(c("18 to 24", "25 to 34", "35 to 44", "45 to 54", "55 to 64", "75+"), length.out=n.participants))
gender <- factor(rep(c("man", "woman", "nonbinary", "notdisclosed", "notdescribed"), length.out=n.participants))
education
marital
ethnic
```

